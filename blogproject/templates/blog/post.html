{% extends "blog/base.html" %}

{% load staticfiles %}

{% if post %}

    {% block title %} {{ post.title }} {% endblock %}

    {% block body_block %}
        <h3>{{ post.title }}</h3>
        <br/>
        <h4>{{ post.pubDate }}</h4>
        <br/>
        <p>{{ post.body }}</p>
        <p>Likes - {{ post.likes }}</p>
        <hr/>
        <h5>There are <span id="num">{{ num_comments }}</span> comment(s)</h5>
        <br/>
        {% if user.is_authenticated %}
            <h4>Post a comment</h4>
            <form id="comment_form" method="" action="">
            {% csrf_token %}
            <textarea id="comment_area" name="comment_area" rows="5" cols="50"></textarea>
                <br/>
                <input type="submit" name="submit" value="Submit"/>
            </form>
        {% else %}
            <h4>Log in to post a comment</h4>
        {% endif %}
        <br/>
        {% if comments %}
            <div class="row" id="comments">            
            {% for c in comments %}
                <div class="comment">
                    <em>{{ c.author }} - {{ c.pubDate }}</em>
                    <button id="{{ c.pk }}" role="button" class="btn btn-success btn-xs likebtn" type="button">
                    <span class="glyphicon glyphicon-thumbs-up"></span>
                    Like
                    </button>
                    <br/>
                    <p>{{ c.body }}</p>
                    <p>Likes - <span id="{{ c.pk }}_likes">{{ c.likes }}</span></p>
                    <hr/>
                </div>
            {% endfor %}
            </div>
        {% endif %}
    {% endblock %}

{% else %}

    <h1><strong>No blog post found by that name</strong></h1>

{% endif %}
